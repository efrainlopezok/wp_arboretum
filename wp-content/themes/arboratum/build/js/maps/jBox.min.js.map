{"version":3,"sources":["jBox.js"],"names":["root","factory","define","amd","jQuery","jBox","exports","module","require","this","type","options","id","width","height","minWidth","maxHeight","attach","trigger","preventDefault","title","content","getTitle","getContent","isolateScroll","ajax","url","data","reload","getData","setContent","spinner","target","position","x","y","outside","offset","attributes","adjustPosition","adjustTracker","adjustDistance","fixed","reposition","repositionOnOpen","repositionOnContent","pointer","pointTo","fade","animation","theme","addClass","overlay","zIndex","delayOpen","delayClose","closeOnEsc","closeOnClick","closeOnMouseleave","closeButton","constructOnInit","blockScroll","appendTo","draggable","dragOver","onInit","onBeforeInit","onAttach","onCreated","onOpen","onClose","onCloseComplete","confirmButton","cancelButton","confirm","cancel","autoClose","color","stack","audio","volume","src","gallery","imageLabel","imageFade","imageSize","defaultOptions","Tooltip","Mouse","Modal","window","Confirm","maxWidth","_onAttach","el","submit","attr","prop","_onCreated","footer","html","click","close","bind","submitButton","container","_onOpen","off","on","eval","source","Notice","_onInit","open","wrapper","each","index","css","parseInt","outerHeight","ignoreDelay","valume","_onCloseComplete","destroy","Image","images","currentImage","imageZIndex","attachedElements","item","push","label","removeAttr","length","appendImage","preload","image","class","backgroundImage","backgroundSize","opacity","animate","showLabel","removeClass","showImage","img","display","load","next_id","append","document","ev","keyCode","_onClose","find","extend","_fireEvent","event","pass","_getUniqueID","top","right","bottom","left","align","userAgent","navigator","toLowerCase","IE8","indexOf","split","prefix","_getOpp","opp","_getXY","xy","center","_getTL","tl","_supportsSVG","createElement","getAttributeNS","_createSVG","svg","createElementNS","setAttribute","_appendSVG","appendChild","_isolateScroll","delta","wheelDelta","originalEvent","detail","overflowBottom","scrollTop","scrollHeight","overflowTop","_create","mouseleave","relatedTarget","inArray","parents","minHeight","isOpen","closeButtonSVG","element","dimensions","outerWidth","alignAttribute","margin","setTitle","titleContainer","selector","button","hasClass","zIndexMax","drg_h","drg_w","pos_y","pageY","pos_x","pageX","Math","max","_positionMouse","pos","setPosition","a","p","ceil","targetDimensions","_adjustPosition","_attachEvents","blockBodyClick","has","scrollTimer","scrollTimerTriggered","positionDelay","now","Date","getTime","setTimeout","_detachEvents","_addOverlay","min","overlay_data","stop","queue","duration","start","_removeOverlay","isEmptyObject","complete","_generateCSS","pulse","zoomIn","zoomOut","move","slide","flip","tada","openDirection","closeDirection","animations","zoomInOpen","zoomInClose","zoomOutOpen","zoomOutClose","moveOpen","positions","0%","moveClose","timing","100%","slideOpen","slideClose","flipOpen","flipClose","generateKeyframeCSS","keyframe_css","translate","replace","toUpperCase","index2","_blockBodyClick","_animate","animationDirection","flipped","classnames","animationDuration","parseFloat","_abortAnimation","classes","filter","c","lastIndexOf","join","positionAdjusted","win","windowDimensions","scrollLeft","outYT","outXR","outYB","outX","outY","outMove","spaceAvail","spaceDiff","i","prototype","elements","undefined","timer","clearTimeout","forceOpen","detach","grep","value","ignore_positioning","wrapperHeight","wrapperWidth","insertBefore","bodyHeight","bodyWidth","children","adjustOffset","setDimensions","val","setWidth","setHeight","keep_position","marginLeft","marginTop","targetOffset","adjustWrapper","isDestroyed","isDisabled","ajaxLoaded","positionedOnOpen","isClosing","isOpening","always","toggle","disable","enable","sysOptions","ajaxRequest","abort","beforeSend","userOptions","response","remove","responseText","_audio","pause","currentTime","e","play","fn","Function","oThis","aArgs","Array","slice","call","arguments","fToBind","fNOP","fBound","apply","concat"],"mappings":"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","file":"../jBox.min.js","sourcesContent":["/*\n---\ndescription: jBox is a powerful and flexible jQuery plugin, taking care of all your modal windows, tooltips, notices and more.\n\nauthors: Stephan Wagner (http://stephanwagner.me)\n\nlicense: MIT (http://opensource.org/licenses/MIT)\n\nrequires: jQuery 1.11.1 (http://code.jquery.com/jquery-1.11.1.min.js)\n          jQuery 2.1.1 (http://code.jquery.com/jquery-2.1.1.min.js)\n\ndocumentation: http://stephanwagner.me/jBox/documentation\n\ndemos: http://stephanwagner.me/jBox/demos\n...\n*/\n\n(function (root, factory) {\n\t\n\t// AMD. Register as an anonymous module\n    if (typeof define === 'function' && define.amd) {\n        define(['jQuery'], function (jQuery) {\n            return (root.jBox = factory(jQuery));\n        });\n    \n    // Node. Does not work with strict CommonJS, but only CommonJS-like enviroments that support module.exports, like Node\n    } else if (typeof exports === 'object') {\n        module.exports = factory(require('jQuery'));\n    \n    // Browser globals\n    } else {\n        root.jBox = factory(root.jQuery);\n    }\n}(this, function (jQuery) {\n\t\n\tvar jBox = function (type, options) {\n\t\t\n\t\tthis.options = {\n\t\t\t\n\t\t\t// jBox ID\n\t\t\tid: null,\t\t\t\t\t// Choose a unique id, otherwise jBox will set one for you (jBoxID1, jBoxID2, ...)\n\t\t\t\n\t\t\t// Dimensions\n\t\t\twidth: 'auto',\t\t\t\t// Width of content area (e.g. 'auto', 100)\n\t\t\theight: 'auto',\t\t\t\t// Height of content area\n\t\t\tminWidth: null,\t\t\t\t// Minimum width\n\t\t\tmaxHeight: null,\t\t\t// Minimum height\n\t\t\tminWidth: null,\t\t\t\t// Maximum width\n\t\t\tmaxHeight: null,\t\t\t// Minimum height\n\t\t\t\n\t\t\t// Attach\n\t\t\tattach: null,\t\t\t\t// Attach jBox to elements (if no target element is provided, jBox will use the attached element as target)\n\t\t\ttrigger: 'click',\t\t\t// The event to open or close your jBoxes, use 'click' or 'mouseenter'\n\t\t\tpreventDefault: false,\t\t// Prevent default event when opening jBox (e.g. don't follow the href in a link when clicking on it)\n\t\t\t\n\t\t\t// Content\n\t\t\ttitle: null,\t\t\t\t// Adds a title to your jBox\n\t\t\tcontent: null,\t\t\t\t// You can use a string to set text or HTML as content, or an element selector (e.g. jQuery('#jBox-content')) to append one or several elements (elements appended will get style display: 'block', so hide them with CSS style display: 'none' beforehand)\n\t\t\tgetTitle: null,\t\t\t\t// Get the title from an attribute when jBox opens\n\t\t\tgetContent: null,\t\t\t// Get the content from an attribute when jBox opens\n\t\t\tisolateScroll: true,\t\t// Isolates scrolling to content container\n\t\t\t\n\t\t\t// AJAX request\n\t\t\tajax: {\t\t\t\t\t\t// Setting an url will make an AJAX call when jBox opens\n\t\t\t\turl: null,\t\t\t\t// URL to send the AJAX request to\n\t\t\t\tdata: '',\t\t\t\t// Data to send with your AJAX call (e.g. 'id=82&limit=10')\n\t\t\t\t// Optional you can add any jQuery AJAX option (http://api.jquery.com/jquery.ajax/)\n\t\t\t\treload: false,\t\t\t// Resend the ajax call every time jBox opens\n\t\t\t\tgetData: 'data-ajax',\t// The attribute in the source element where the AJAX will look for the data to send with, e.g. data-ajax=\"id=82&limit=10\"\n\t\t\t\tsetContent: true,\t\t// Automatically set the response as new content when the AJAX call is finished\n\t\t\t\tspinner: true\t\t\t// Hides the current content and adds a spinner while loading, you can pass html content to add your own spinner, e.g. spinner: '<div class=\"mySpinner\"></div>'\n\t\t\t},\n\t\t\t\n\t\t\t// Position\n\t\t\ttarget: null,\t\t\t\t// The target element where jBox will be opened\n\t\t\tposition: {\n\t\t\t\tx: 'center',\t\t\t// Horizontal Position (Use a number, 'left', 'right' or 'center')\n\t\t\t\ty: 'center'\t\t\t\t// Vertical Position (Use a number, 'top', 'bottom' or 'center')\n\t\t\t},\n\t\t\toutside: null,\t\t\t\t// Use 'x', 'y', or 'xy' to move your jBox outside of the target element\n\t\t\toffset: 0,\t\t\t\t\t// Offset to final position, you can set different values for x and y with an object e.g. {x: 15, y: 0}\n\t\t\t\n\t\t\tattributes: {\t\t\t\t// Note that attributes can only be 'left' or 'right' when using numbers for position, e.g. {x: 300, y: 20}\n\t\t\t\tx: 'left',\t\t\t\t// Horizontal position, use 'left' or 'right'\n\t\t\t\ty: 'top'\t\t\t\t// Vertical position, use 'top' or 'bottom'\n\t\t\t},\n\t\t\tadjustPosition: false,\t\t// Adjusts the position when there is not enough space (use true, 'flip' or 'move')\n\t\t\tadjustTracker: false,\t\t// By default jBox adjusts the position when opening, to adjust when scrolling or resizing, use 'scroll', 'resize' or 'true' (both events)\n\t\t\tadjustDistance: 5,\t\t\t// How far from the window edge we start adjusting, use an object to set different values: {bottom: 5, top: 50, left: 5, right: 20}\n\t\t\tfixed: false,\t\t\t\t// Your jBox will stay on position when scrolling\n\t\t\treposition: false,\t\t\t// Calculates new position when the window-size changes\n\t\t\trepositionOnOpen: true,\t\t// Calculates new position each time jBox opens (rather than only when it opens the first time)\n\t\t\trepositionOnContent: true,\t// Calculates new position when the content changes with .setContent() or .setTitle()\n\t\t\t\n\t\t\t// Pointer\n\t\t\tpointer: false,\t\t\t\t// Your pointer will always point towards the target element, so the option outside should be 'x' or 'y'\n\t\t\tpointTo: 'target',\t\t\t// Setting something else than 'target' will add a pointer even if there is no target element set or found (Use 'top', 'bottom', 'left' or 'right')\n\t\t\t\n\t\t\t// Animations\n\t\t\tfade: 180,\t\t\t\t\t// Fade duration in ms, set to 0 or false to disable\n\t\t\tanimation: null,\t\t\t// Animation when opening or closing (use 'pulse', 'zoomIn', 'zoomOut', 'move', 'slide', 'flip', 'tada') (CSS inspired from Daniel Edens Animate.css: http://daneden.me/animate)\n\t\t\t\n\t\t\t// Appearance\n\t\t\ttheme: 'Default',\t\t\t// Set a jBox theme class\n\t\t\taddClass: '',\t\t\t\t// Adds classes to the wrapper\n\t\t\toverlay: false,\t\t\t\t// Adds an overlay when jBox opens (set color and opacity with CSS)\n\t\t\tzIndex: 10000,\t\t\t\t// Use a high zIndex (your overlay will have the lowest zIndex of all your jBoxes (with overlays) minus one)\n\t\t\t\n\t\t\t// Delays\n\t\t\tdelayOpen: 0,\t\t\t\t// Delay opening in ms (Note that the delay will be ignored if your jBox didn't finish closing)\n\t\t\tdelayClose: 0,\t\t\t\t// Delay closing in ms (Note that there is always a closing delay of at least 10ms to ensure jBox won't be closed when opening right away)\n\t\t\t\n\t\t\t// Closing events\n\t\t\tcloseOnEsc: false,\t\t\t// Close jBox when pressing [esc] key\n\t\t\tcloseOnClick: false,\t\t// Close jBox with mouseclick, use 'true' (click anywhere), 'box' (click on jBox itself), 'overlay' (click on the overlay), 'body' (click anywhere but jBox)\n\t\t\tcloseOnMouseleave: false,\t// Close jBox when the mouse leaves the jBox area or the area of the attached element\n\t\t\tcloseButton: false,\t\t\t// Adds a close button to your jBox, use 'title', 'overlay', 'box' or true (true will add the button to overlay, title or box, in that order if any of those elements can be found)\n\t\t\t\n\t\t\t// Other options\n\t\t\tconstructOnInit: false,\t\t// Construct jBox when it's being initialized\n\t\t\tblockScroll: false,\t\t\t// When jBox is open, block scrolling\n\t\t\tappendTo: jQuery('body'), \t// Provide an element if you want the jBox to be positioned inside a specific element (only useful for fixed positions or when position values are numbers)\n\t\t\tdraggable: null,\t\t\t// Make your jBox draggable (use 'true', 'title' or provide an element as handle) (inspired from Chris Coyiers CSS-Tricks http://css-tricks.com/snippets/jquery/draggable-without-jquery-ui/)\n\t\t\tdragOver: true,\t\t\t\t// When you have multiple draggable jBoxes, the one you select will always move over the other ones\n\t\t\t\n\t\t\t// Events\t\t\t\t\t// Note: You can use 'this' in the event functions, it refers to your jBox object (e.g. onInit: function() { this.open(); })\n\t\t\tonInit: null,\t\t\t\t// Triggered when jBox is initialized\n\t\t\tonBeforeInit: null,\t\t\t// Triggered when jBox starts initializing, useful to add your own internal functions\n\t\t\tonAttach: null,\t\t\t\t// Triggered when jBox attached itself to elements\n\t\t\t// TODO onPosition\n\t\t\tonCreated: null,\t\t\t// Triggered when jBox is created and is availible in DOM\n\t\t\tonOpen: null,\t\t\t\t// Triggered when jBox opens\n\t\t\tonClose: null,\t\t\t\t// Triggered when jBox closes\n\t\t\tonCloseComplete: null,\t\t// Triggered when jBox is completely closed (when fading is finished, useful if you want to destroy the jBox when it is closed)\n\t\t\t\n\t\t\t// Only for type \"Confirm\"\n\t\t\tconfirmButton: 'Submit',\t// Text for the submit button\n\t\t\tcancelButton: 'Cancel',\t\t// Text for the cancel button\n\t\t\tconfirm: null,\t\t\t\t// Function to execute when clicking the submit button. By default jBox will use firstly the onclick and secondly the href attribute\n\t\t\tcancel: null,\t\t\t\t// Function to execute when clicking the cancel button\n\t\t\t\n\t\t\t// Only for type \"Notice\"\n\t\t\tautoClose: 7000,\t\t\t// Time when jBox should close automatically\n\t\t\tcolor: null,\t\t\t\t// Makes your notices colorful, use 'black', 'red', 'green', 'blue', 'yellow'\n\t\t\tstack: true,\t\t\t\t// Set to false to disable notice-stacking\n\t\t\taudio: false,\t\t\t\t// Set the url to an audio file without extention, e.g. '/url/filename'. jBox will look for an .mp3 and an .ogg file\n\t\t\tvolume: 100,\t\t\t\t// Percent of volume for audio files\n\t\t\t\n\t\t\t// Only for type \"Image\"\n\t\t\tsrc: 'href',\t\t\t\t// The attribute where jBox gets the image source from, e.g. href=\"/path_to_image/image.jpg\"\n\t\t\tgallery: 'data-jbox-image',\t// The attribute where you define the image gallery, e.g. data-jbox-image=\"gallery1\"\n\t\t\timageLabel: 'title',\t\t// The attribute where jBox gets the image label from, e.g. title=\"My label\"\n\t\t\timageFade: 600,\t\t\t\t// The fade duration for images\n\t\t\timageSize: 'contain'\t\t// How to display the images: Use CSS background-position values, e.g. 'cover', 'contain', 'auto', 'initial', '50% 50%'\n\t\t};\n\n\t\t// Default type options\n\t\tthis.defaultOptions = {\n\t\t\t// Default options for tooltips\n\t\t\t'Tooltip': {\n\t\t\t\tgetContent: 'title',\n\t\t\t\ttrigger: 'mouseenter',\n\t\t\t\tposition: {x: 'center', y: 'top'},\n\t\t\t\toutside: 'y',\n\t\t\t\tpointer: true,\n\t\t\t\tadjustPosition: true,\n\t\t\t\treposition: true\n\t\t\t},\n\t\t\t// Default options for mouse tooltips\n\t\t\t'Mouse': {\n\t\t\t\ttarget: 'mouse',\n\t\t\t\tposition: {x: 'right', y: 'bottom'},\n\t\t\t\toffset: 15,\n\t\t\t\ttrigger: 'mouseenter',\n\t\t\t\tadjustPosition: 'flip'\n\t\t\t},\n\t\t\t// Default options for modal windows\n\t\t\t'Modal': {\n\t\t\t\ttarget: jQuery(window),\n\t\t\t\tfixed: true,\n\t\t\t\tblockScroll: true,\n\t\t\t\tcloseOnEsc: true,\n\t\t\t\tcloseOnClick: 'overlay',\n\t\t\t\tcloseButton: true,\n\t\t\t\toverlay: true,\n\t\t\t\tanimation: 'zoomOut'\n\t\t\t},\n\t\t\t// Default options for modal confirm windows\n\t\t\t'Confirm': {\n\t\t\t\ttarget: jQuery(window),\n\t\t\t\tfixed: true,\n\t\t\t\tattach: jQuery('[data-confirm]'),\n\t\t\t\tgetContent: 'data-confirm',\n\t\t\t\tcontent: 'Do you really want to do this?',\n\t\t\t\tminWidth: 320,\n\t\t\t\tmaxWidth: 460,\n\t\t\t\tblockScroll: true,\n\t\t\t\tcloseOnEsc: true,\n\t\t\t\tcloseOnClick: 'overlay',\n\t\t\t\tcloseButton: true,\n\t\t\t\toverlay: true,\n\t\t\t\tanimation: 'zoomOut',\n\t\t\t\tpreventDefault: true,\n\t\t\t\t_onAttach: function(el) {\n\t\t\t\t\t// Extract the href or the onclick event if no submit event is passed\n\t\t\t\t\tif (!this.options.confirm) {\n\t\t\t\t\t\tvar submit = el.attr('onclick') ? el.attr('onclick') : (el.attr('href') ? (el.attr('target') ? 'window.open(\"' + el.attr('href') + '\", \"' + el.attr('target') + '\");'  : 'window.location.href = \"' + el.attr('href') + '\";') : '');\n\t\t\t\t\t\tel.prop('onclick', null).data('jBox-Confirm-submit', submit);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t_onCreated: function() {\n\t\t\t\t\t// Add a footer to the jBox container\n\t\t\t\t\tthis.footer = jQuery('<div class=\"jBox-Confirm-footer\"/>');\n\t\t\t\t\tjQuery('<div class=\"jBox-Confirm-button jBox-Confirm-button-cancel\"/>').html(this.options.cancelButton).click(function() { this.options.cancel && this.options.cancel(); this.close(); }.bind(this)).appendTo(this.footer);\n\t\t\t\t\tthis.submitButton = jQuery('<div class=\"jBox-Confirm-button jBox-Confirm-button-submit\"/>').html(this.options.confirmButton).appendTo(this.footer);\n\t\t\t\t\tthis.footer.appendTo(this.container);\n\t\t\t\t},\n\t\t\t\t_onOpen: function() {\n\t\t\t\t\t// Set the new action for the submit button\n\t\t\t\t\tthis.submitButton.off('click.jBox-Confirm' + this.id).on('click.jBox-Confirm' + this.id, function() { this.options.confirm ? this.options.confirm() : eval(this.source.data('jBox-Confirm-submit')); this.close(); }.bind(this));\n\t\t\t\t}\n\t\t\t},\n\t\t\t// Default options for notices\n\t\t\t'Notice': {\n\t\t\t\ttarget: jQuery(window),\n\t\t\t\tfixed: true,\n\t\t\t\tposition: {x: 20, y: 20},\n\t\t\t\tattributes: {x: 'right', y: 'top'},\n\t\t\t\tanimation: 'zoomIn',\n\t\t\t\tcloseOnClick: 'box',\n\t\t\t\t_onInit: function () {\n\t\t\t\t\tthis.open();\n\t\t\t\t\tthis.options.delayClose = this.options.autoClose;\n\t\t\t\t\tthis.options.delayClose && this.close();\n\t\t\t\t},\n\t\t\t\t_onCreated: function() {\n\t\t\t\t\tthis.options.color && this.wrapper.addClass('jBox-Notice-color jBox-Notice-' + this.options.color);\n\t\t\t\t\tthis.wrapper.data('jBox-Notice-position', this.options.attributes.x + '-' + this.options.attributes.y);\n\t\t\t\t},\n\t\t\t\t_onOpen: function() {\n\t\t\t\t\t// Loop through notices at same window corner and either move or destroy them\n\t\t\t\t\tjQuery.each(jQuery('.jBox-Notice'), function(index, el) {\n\t\t\t\t\t\tel = jQuery(el);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (el.attr('id') == this.id || el.data('jBox-Notice-position') != this.options.attributes.x + '-' + this.options.attributes.y) return;\n\t\t\t\t\t\tif (!this.options.stack) {\n\t\t\t\t\t\t\tel.data('jBox').close({ignoreDelay: true});\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tel.css('margin-' + this.options.attributes.y, parseInt(el.css('margin-' + this.options.attributes.y)) + this.wrapper.outerHeight() + 10);\n\t\t\t\t\t}.bind(this));\n\t\t\t\t\t\n\t\t\t\t\t// Play audio file, IE8 doesn't support audio\n\t\t\t\t\tthis.options.audio && this.audio({url: this.options.audio, valume: this.options.volume});\n\t\t\t\t},\n\t\t\t\t// Remove notice from DOM when closing finishes\n\t\t\t\t_onCloseComplete: function() {\n\t\t\t\t\tthis.destroy();\n\t\t\t\t}\n\t\t\t},\n\t\t\t// Default options for images\n\t\t\t'Image': {\n\t\t\t\ttarget: jQuery(window),\n\t\t\t\tfixed: true,\n\t\t\t\tblockScroll: true,\n\t\t\t\tcloseOnEsc: true,\n\t\t\t\tcloseOnClick: 'overlay',\n\t\t\t\tcloseButton: true,\n\t\t\t\toverlay: true,\n\t\t\t\tanimation: 'zoomOut',\n\t\t\t\twidth: 800,\n\t\t\t\theight: 533,\n\t\t\t\tattach: jQuery('[data-jbox-image]'),\n\t\t\t\tpreventDefault: true,\n\t\t\t\t\n\t\t\t\t// TODO: What if the image is not found?\n\t\t\t\t// TODO: What if the first image of a gallery needs some time to load, but other images are in content. Maybe add a blank black container\n\t\t\t\t\n\t\t\t\t_onInit: function() {\n\t\t\t\t\tthis.images = this.currentImage = {};\n\t\t\t\t\tthis.imageZIndex = 1;\n\t\t\t\t\t\n\t\t\t\t\t// Loop through images, sort and save in global variable\n\t\t\t\t\tthis.attachedElements && jQuery.each(this.attachedElements, function (index, item) {\n\t\t\t\t\t\titem = jQuery(item);\n\t\t\t\t\t\tif (item.data('jBox-image-gallery')) return;\n\t\t\t\t\t\tvar gallery = item.attr(this.options.gallery) || 'default';\n\t\t\t\t\t\t!this.images[gallery] && (this.images[gallery] = []);\n\t\t\t\t\t\tthis.images[gallery].push({src: item.attr(this.options.src), label: (item.attr(this.options.imageLabel) || '')});\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Remove the title attribute so it won't show the browsers tooltip\n\t\t\t\t\t\tthis.options.imageLabel == 'title' && item.removeAttr('title');\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Store data in source element for easy access\n\t\t\t\t\t\titem.data('jBox-image-gallery', gallery);\n\t\t\t\t\t\titem.data('jBox-image-id', (this.images[gallery].length - 1));\n\t\t\t\t\t}.bind(this));\n\t\t\t\t\t\n\t\t\t\t\t// Helper to inject the image into content area\n\t\t\t\t\tvar appendImage = function(gallery, id, preload, open) {\n\t\t\t\t\t\tif (jQuery('#jBox-image-' + gallery + '-' + id).length) return;\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar image = jQuery('<div/>', {\n\t\t\t\t\t\t\tid: 'jBox-image-' + gallery + '-' + id,\n\t\t\t\t\t\t\t'class': 'jBox-image-container'\n\t\t\t\t\t\t}).css({\n\t\t\t\t\t\t\tbackgroundImage: 'url(' + this.images[gallery][id].src + ')',\n\t\t\t\t\t\t\tbackgroundSize: this.options.imageSize,\n\t\t\t\t\t\t\topacity: (open ? 1 : 0),\n\t\t\t\t\t\t\tzIndex: (preload ? 0 : this.imageZIndex++)\n\t\t\t\t\t\t}).appendTo(this.content);\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar text = jQuery('<div/>', {\n\t\t\t\t\t\t\tid: 'jBox-image-label-' + gallery + '-' + id,\n\t\t\t\t\t\t\t'class': 'jBox-image-label' + (open ? ' active' : '')\n\t\t\t\t\t\t}).html(this.images[gallery][id].label).appendTo(this.imageLabel);\n\t\t\t\t\t\t\n\t\t\t\t\t\t!open && !preload && image.animate({opacity: 1}, this.options.imageFade);\n\t\t\t\t\t}.bind(this);\n\t\t\t\t\t\n\t\t\t\t\t// Helper to show new image label\n\t\t\t\t\tvar showLabel = function(gallery, id) {\n\t\t\t\t\t\tjQuery('.jBox-image-label.active').removeClass('active');\n\t\t\t\t\t\tjQuery('#jBox-image-label-' + gallery + '-' + id).addClass('active');\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\t// Show images when they are loaded or load them if not\n\t\t\t\t\tthis.showImage = function(img) {\n\t\t\t\t\t\t// Get the gallery and the image id from the next or the previous image\n\t\t\t\t\t\tif (img != 'open') {\n\t\t\t\t\t\t\tvar gallery = this.currentImage.gallery;\n\t\t\t\t\t\t\tvar id = this.currentImage.id + (1 * (img == 'prev') ? -1 : 1);\n\t\t\t\t\t\t\tid = id > (this.images[gallery].length - 1) ? 0 : (id < 0 ? (this.images[gallery].length - 1) : id);\n\t\t\t\t\t\t\t// Or get image data from source element\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar gallery = this.source.data('jBox-image-gallery');\n\t\t\t\t\t\t\tvar id = this.source.data('jBox-image-id');\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// Remove or show the next and prev buttons\n\t\t\t\t\t\t\tjQuery('.jBox-image-pointer-prev, .jBox-image-pointer-next').css({display: (this.images[gallery].length > 1 ? 'block' : 'none')});\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Set new current image\n\t\t\t\t\t\tthis.currentImage = {gallery: gallery, id: id};\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Show image if it already exists\n\t\t\t\t\t\tif (jQuery('#jBox-image-' + gallery + '-' + id).length) {\n\t\t\t\t\t\t\tjQuery('#jBox-image-' + gallery + '-' + id).css({zIndex: this.imageZIndex++, opacity: 0}).animate({opacity: 1}, (img == 'open') ? 0 : this.options.imageFade);\n\t\t\t\t\t\t\tshowLabel(gallery, id);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// Load image if not found\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// TODO loading not working properly anymore\n\t\t\t\t\t\t\tthis.wrapper.addClass('jBox-loading');\n\t\t\t\t\t\t\tvar image = jQuery('<img src=\"' + this.images[gallery][id].src + '\">').load(function() {\n\t\t\t\t\t\t\t\tappendImage(gallery, id, false);\n\t\t\t\t\t\t\t\tshowLabel(gallery, id);\n\t\t\t\t\t\t\t\tthis.wrapper.removeClass('jBox-loading');\n\t\t\t\t\t\t\t}.bind(this));\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Preload next image\n\t\t\t\t\t\tvar next_id = id + 1;\n\t\t\t\t\t\tnext_id = next_id > (this.images[gallery].length - 1) ? 0 : (next_id < 0 ? (this.images[gallery].length - 1) : next_id);\n\t\t\t\t\t\t\n\t\t\t\t\t\t(!jQuery('#jBox-image-' + gallery + '-' + next_id).length) && jQuery('<img src=\"' + this.images[gallery][next_id].src + '\">').load(function() {\n\t\t\t\t\t\t\tappendImage(gallery, next_id, true);\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\t_onCreated: function() {\n\t\t\t\t\n\t\t\t\t\t// TODO: NO ID!!!\n\t\t\t\t\n\t\t\t\t\tthis.imageLabel = jQuery('<div/>', {'id': 'jBox-image-label'}).appendTo(this.wrapper);\n\t\t\t\t\tthis.wrapper.append(jQuery('<div/>', {'class': 'jBox-image-pointer-prev', click: function() { this.showImage('prev'); }.bind(this)})).append(jQuery('<div/>', {'class': 'jBox-image-pointer-next', click: function() { this.showImage('next'); }.bind(this)}));\n\t\t\t\t},\n\t\t\t\t_onOpen: function() {\n\t\t\t\t\t// Add a class to body so you can control the appearance of the overlay, for images a darker one is better\n\t\t\t\t\tjQuery('body').addClass('jBox-image-open');\n\t\t\t\t\t\n\t\t\t\t\t// Add key events\n\t\t\t\t\tjQuery(document).on('keyup.jBox-' + this.id, function(ev) {\n\t\t\t\t\t\t(ev.keyCode == 37) && this.showImage('prev');\n\t\t\t\t\t\t(ev.keyCode == 39) && this.showImage('next');\n\t\t\t\t\t}.bind(this));\n\t\t\t\t\t\n\t\t\t\t\t// Load the image from the attached element\n\t\t\t\t\tthis.showImage('open');\n\t\t\t\t},\n\t\t\t\t_onClose: function() {\n\t\t\t\t\tjQuery('body').removeClass('jBox-image-open');\n\t\t\t\t\t\n\t\t\t\t\t// Remove key events\n\t\t\t\t\tjQuery(document).off('keyup.jBox-' + this.id);\n\t\t\t\t},\n\t\t\t\t_onCloseComplete: function() {\n\t\t\t\t\t// Hide all images\n\t\t\t\t\tthis.wrapper.find('.jBox-image-container').css('opacity', 0);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t\n\t\t// Set default options for jBox types\n\t\tif (jQuery.type(type) == 'string') {\n\t\t\tthis.type = type;\n\t\t\ttype = this.defaultOptions[type] ? this.defaultOptions[type] : window['jBox' + type + 'Options'];\n\t\t}\n\t\t\n\t\t// Merge options\n\t\tthis.options = jQuery.extend(true, this.options, type, options);\n\t\t\n\t\t// Function to fire events\n\t\tthis._fireEvent = function(event, pass) {\n\t\t\tthis.options['_' + event] && (this.options['_' + event].bind(this))(pass);\n\t\t\tthis.options[event] && (this.options[event].bind(this))(pass);\n\t\t};\n\t\t\n\t\t// Fire onBeforeInit event\n\t\tthis._fireEvent('onBeforeInit');\n\t\t\n\t\t// Get unique ID\n\t\tif (this.options.id === null) {\n\t\t\tthis.options.id = 'jBoxID' + jBox._getUniqueID();\n\t\t}\n\t\tthis.id = this.options.id;\n\t\t\n\t\t// Correct impossible options\n\t\t((this.options.position.x == 'center' && this.options.outside == 'x') || (this.options.position.y == 'center' && this.options.outside == 'y')) && (this.options.outside = false);\n\t\t(!this.options.outside || this.options.outside == 'xy') && (this.options.pointer = false);\n\t\t\n\t\t// Correct multiple choice options\n\t\tjQuery.type(this.options.offset) != 'object' && (this.options.offset = {x: this.options.offset, y: this.options.offset});\n\t\tthis.options.offset.x || (this.options.offset.x = 0);\n\t\tthis.options.offset.y || (this.options.offset.y = 0);\n\t\tjQuery.type(this.options.adjustDistance) != 'object' ? (this.options.adjustDistance = {top: this.options.adjustDistance, right: this.options.adjustDistance, bottom: this.options.adjustDistance, left: this.options.adjustDistance}) : (this.options.adjustDistance = jQuery.extend({top: 5, left: 5, right: 5, bottom: 5}, this.options.adjustDistance));\n\t\t\n\t\t// Save where the jBox is aligned to\n\t\tthis.align = (this.options.outside && this.options.outside != 'xy') ? this.options.position[this.options.outside] : (this.options.position.y != 'center' && jQuery.type(this.options.position.y) != 'number' ? this.options.position.x : (this.options.position.x != 'center' && jQuery.type(this.options.position.x) != 'number' ? this.options.position.y : this.options.attributes.x));\n\t\t\n\t\t// Save default outside position\n\t\tthis.options.outside && this.options.outside != 'xy' && (this.outside = this.options.position[this.options.outside]);\n\t\t\n\t\t// I know browser detection is bad practice, but for now it seems the only option to get jBox working in IE8\n\t\tvar userAgent = navigator.userAgent.toLowerCase();\n\t\tthis.IE8 = userAgent.indexOf('msie') != -1 && parseInt(userAgent.split('msie')[1]) == 8;\n\t\t\n\t\t// Save global var for webkit prefix\n\t\tthis.prefix = userAgent.indexOf('webkit') != -1 ? '-webkit-' : '';\n\t\t\n\t\t// Internal functions, used to easily get values\n\t\tthis._getOpp = function(opp) { return {left: 'right', right: 'left', top: 'bottom', bottom: 'top', x: 'y', y: 'x'}[opp]; };\n\t\tthis._getXY = function(xy) { return {left: 'x', right: 'x', top: 'y', bottom: 'y', center: 'x'}[xy]; };\n\t\tthis._getTL = function(tl) { return {left: 'left', right: 'left', top: 'top', bottom: 'top', center: 'left', x: 'left', y: 'top'}[tl]; };\n\t\t\n\t\t// Check for SVG support\n\t\tthis._supportsSVG = function() {\n\t\t\treturn document.createElement('svg').getAttributeNS;\n\t\t}\n\t\t\n\t\t// Create an svg element\n\t\tthis._createSVG = function(type, options) {\n\t\t\tvar svg = document.createElementNS('http://www.w3.org/2000/svg', type);\n\t\t\tjQuery.each(options, function (index, item) {\n\t\t\t\tsvg.setAttribute(item[0], (item[1] || ''));\n\t\t\t});\n\t\t\treturn svg;\n\t\t};\n\t\t\n\t\t// Append a svg element to a svg container\n\t\tthis._appendSVG = function(source, target) {\n\t\t\treturn target.appendChild(source);\n\t\t};\n\t\t\n\t\t// Isolate scrolling in a container\n\t\tthis._isolateScroll = function(el) {\n\t\t\tif(!el || !jQuery(el).length) return;\n\t\t\tel.on('DOMMouseScroll.jBoxIsolatedScroll mousewheel.jBoxIsolatedScroll', function(ev) {\n\t\t\t\tvar delta = ev.wheelDelta || (ev.originalEvent && ev.originalEvent.wheelDelta) || -ev.detail,\n\t\t\t\t\toverflowBottom = this.scrollTop + el.outerHeight() - this.scrollHeight >= 0,\n\t\t\t\t\toverflowTop = this.scrollTop <= 0;\n\t\t\t\t\tif ((delta < 0 && overflowBottom) || (delta > 0 && overflowTop)) ev.preventDefault();\n\t\t\t});\n\t\t};\n\t\t\n\t\t// Create jBox\n\t\tthis._create = function() {\n\t\t\tif (this.wrapper) return;\n\t\t\t\n\t\t\t// Create wrapper\n\t\t\tthis.wrapper = jQuery('<div/>', {\n\t\t\t\tid: this.id,\n\t\t\t\t'class': 'jBox-wrapper' + (this.type ? ' jBox-' + this.type : '') + (this.options.theme ? ' jBox-' + this.options.theme : '') + (this.options.addClass ? ' ' + this.options.addClass : '') + (this.IE8 ? ' jBox-IE8' : '')\n\t\t\t}).css({\n\t\t\t\tposition: (this.options.fixed ? 'fixed' : 'absolute'),\n\t\t\t\tdisplay: 'none',\n\t\t\t\topacity: 0,\n\t\t\t\tzIndex: this.options.zIndex\n\t\t\t\t\n\t\t\t\t// Save the jBox instance in the wrapper, so you can get access to your jBox when you only have the element\n\t\t\t}).data('jBox', this);\n\t\t\t\n\t\t\t// Add mouseleave event (.parents('*') might be a performance nightmare! Maybe there is a better way)\n\t\t\tthis.options.closeOnMouseleave && this.wrapper.mouseleave(function(ev) {\n\t\t\t\t// Only close when the new target is not the source element\n\t\t\t\t!this.source || !(ev.relatedTarget == this.source[0] || jQuery.inArray(this.source[0], jQuery(ev.relatedTarget).parents('*')) !== -1) && this.close();\n\t\t\t}.bind(this));\n\t\t\t\n\t\t\t// Add closeOnClick: 'box' events\n\t\t\t(this.options.closeOnClick == 'box') && this.wrapper.on('touchend click', function() { this.close({ignoreDelay: true}); }.bind(this));\n\t\t\t\n\t\t\t// Create container\n\t\t\tthis.container = jQuery('<div/>', {'class': 'jBox-container'}).appendTo(this.wrapper);\n\t\t\t\n\t\t\t// Create content\n\t\t\tthis.content = jQuery('<div/>', {'class': 'jBox-content'}).css({width: this.options.width, height: this.options.height, minWidth: this.options.minWidth, minHeight: this.options.minHeight, maxWidth: this.options.maxWidth, maxHeight: this.options.maxHeight}).appendTo(this.container);\n\t\t\t\n\t\t\t// Isolate scrolling\n\t\t\tthis.options.isolateScroll && this._isolateScroll(this.content);\n\t\t\t\n\t\t\t// Create close button\n\t\t\tif (this.options.closeButton) {\n\t\t\t\tthis.closeButton = jQuery('<div/>', {'class': 'jBox-closeButton jBox-noDrag'}).on('touchend click', function(ev) { this.isOpen && this.close({ignoreDelay: true}); }.bind(this));\n\t\t\t\t\n\t\t\t\tif (this._supportsSVG()) {\n\t\t\t\t\tvar closeButtonSVG = this._createSVG('svg', [['viewBox', '0 0 24 24']]);\n\t\t\t\t\tthis._appendSVG(this._createSVG('path', [['d', 'M22.2,4c0,0,0.5,0.6,0,1.1l-6.8,6.8l6.9,6.9c0.5,0.5,0,1.1,0,1.1L20,22.3c0,0-0.6,0.5-1.1,0L12,15.4l-6.9,6.9c-0.5,0.5-1.1,0-1.1,0L1.7,20c0,0-0.5-0.6,0-1.1L8.6,12L1.7,5.1C1.2,4.6,1.7,4,1.7,4L4,1.7c0,0,0.6-0.5,1.1,0L12,8.5l6.8-6.8c0.5-0.5,1.1,0,1.1,0L22.2,4z']]), closeButtonSVG);\n\t\t\t\t\tthis.closeButton.append(closeButtonSVG);\n\t\t\t\t} else {\n\t\t\t\t\tthis.wrapper.addClass('jBox-nosvg');\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Add close button to jBox container\n\t\t\t\tif (this.options.closeButton == 'box' || (this.options.closeButton === true && !this.options.overlay && !this.options.title)) {\n\t\t\t\t\tthis.wrapper.addClass('jBox-closeButton-box');\n\t\t\t\t\tthis.closeButton.appendTo(this.container);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// Append jBox to DOM\n\t\t\tthis.wrapper.appendTo(this.options.appendTo);\n\t\t\t\n\t\t\t// Create pointer\n\t\t\tif (this.options.pointer) {\n\t\t\t\t\n\t\t\t\t// Get pointer vars and save globally\n\t\t\t\tthis.pointer = {\n\t\t\t\t\tposition: (this.options.pointTo != 'target') ? this.options.pointTo : this._getOpp(this.outside),\n\t\t\t\t\txy: (this.options.pointTo != 'target') ? this._getXY(this.options.pointTo) : this._getXY(this.outside),\n\t\t\t\t\talign: 'center',\n\t\t\t\t\toffset: 0\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tthis.pointer.element = jQuery('<div/>', {'class': 'jBox-pointer jBox-pointer-' + this.pointer.position}).appendTo(this.wrapper);\n\t\t\t\tthis.pointer.dimensions = {\n\t\t\t\t\tx: this.pointer.element.outerWidth(),\n\t\t\t\t\ty: this.pointer.element.outerHeight()\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tif (jQuery.type(this.options.pointer) == 'string') {\n\t\t\t\t\tvar split = this.options.pointer.split(':');\n\t\t\t\t\tsplit[0] && (this.pointer.align = split[0]);\n\t\t\t\t\tsplit[1] && (this.pointer.offset = parseInt(split[1]));\n\t\t\t\t}\n\t\t\t\tthis.pointer.alignAttribute = (this.pointer.xy == 'x' ? (this.pointer.align == 'bottom' ? 'bottom' : 'top') : (this.pointer.align == 'right' ? 'right' : 'left'));\n\t\t\t\t\n\t\t\t\t// Set wrapper CSS\n\t\t\t\tthis.wrapper.css('padding-' + this.pointer.position, this.pointer.dimensions[this.pointer.xy]);\n\t\t\t\t\n\t\t\t\t// Set pointer CSS\n\t\t\t\tthis.pointer.element.css(this.pointer.alignAttribute, (this.pointer.align == 'center' ? '50%' : 0)).css('margin-' + this.pointer.alignAttribute, this.pointer.offset);\n\t\t\t\tthis.pointer.margin = {}; this.pointer.margin['margin-' + this.pointer.alignAttribute] = this.pointer.offset;\n\t\t\t\t\n\t\t\t\t// Add a transform to fix centered position\n\t\t\t\t(this.pointer.align == 'center') && this.pointer.element.css(this.prefix + 'transform', 'translate(' + (this.pointer.xy == 'y' ? (this.pointer.dimensions.x * -0.5 + 'px') : 0) + ', ' + (this.pointer.xy == 'x' ? (this.pointer.dimensions.y * -0.5 + 'px') : 0) + ')');\n\t\t\t\t\n\t\t\t\tthis.pointer.element.css((this.pointer.xy == 'x' ? 'width' : 'height'), parseInt(this.pointer.dimensions[this.pointer.xy]) + parseInt(this.container.css('border-' + this.pointer.alignAttribute + '-width')));\n\t\t\t\t\n\t\t\t\t// Add class to wrapper for CSS access\n\t\t\t\tthis.wrapper.addClass('jBox-pointerPosition-' + this.pointer.position);\n\t\t\t}\n\t\t\t\n\t\t\t// Set title and content\n\t\t\tthis.setContent(this.options.content, true);\n\t\t\tthis.setTitle(this.options.title, true);\n\t\t\t\n\t\t\t// Make jBox draggable\n\t\t\tif (this.options.draggable) {\n\t\t\t\tvar handle = (this.options.draggable == 'title') ? this.titleContainer : (this.options.draggable.length > 0 ? this.options.draggable : (this.options.draggable.selector ? jQuery(this.options.draggable.selector) : this.wrapper));\n\t\t\t\thandle.addClass('jBox-draggable').on('mousedown', function(ev) {\n\t\t\t\t\tif (ev.button == 2 || jQuery(ev.target).hasClass('jBox-noDrag') || jQuery(ev.target).parents('.jBox-noDrag').length) return;\n\t\t\t\t\t\n\t\t\t\t\tif (this.options.dragOver && this.wrapper.css('zIndex') <= jBox.zIndexMax) {\n\t\t\t\t\t\tjBox.zIndexMax += 1;\n\t\t\t\t\t\tthis.wrapper.css('zIndex', jBox.zIndexMax);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar drg_h = this.wrapper.outerHeight(),\n\t\t\t\t\t\tdrg_w = this.wrapper.outerWidth(),\n\t\t\t\t\t\tpos_y = this.wrapper.offset().top + drg_h - ev.pageY,\n\t\t\t\t\t\tpos_x = this.wrapper.offset().left + drg_w - ev.pageX;\n\t\t\t\t\tjQuery(document).on('mousemove.jBox-draggable-' + this.id, function(ev) {\n\t\t\t\t\t\tthis.wrapper.offset({\n\t\t\t\t\t\t\ttop: ev.pageY + pos_y - drg_h,\n\t\t\t\t\t\t\tleft: ev.pageX + pos_x - drg_w\n\t\t\t\t\t\t});\n\t\t\t\t\t}.bind(this));\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t}.bind(this)).on('mouseup', function() { jQuery(document).off('mousemove.jBox-draggable-' + this.id); }.bind(this));\n\t\t\t\t\n\t\t\t\t// Add z-index\n\t\t\t\tjBox.zIndexMax = !jBox.zIndexMax ? this.options.zIndex : Math.max(jBox.zIndexMax, this.options.zIndex);\n\t\t\t}\n\t\t\t\n\t\t\t// Fire onCreated event\n\t\t\tthis._fireEvent('onCreated');\n\t\t};\n\t\t\n\t\t// Create jBox onInit\n\t\tthis.options.constructOnInit && this._create();\n\t\t\n\t\t// Attach jBox\n\t\tthis.options.attach && this.attach();\n\t\t\n\t\t// Position jBox on mouse\n\t\tthis._positionMouse = function(ev) {\n\t\t\t\n\t\t\t// Calculate positions\n\t\t\tthis.pos = {\n\t\t\t\tleft: ev.pageX,\n\t\t\t\ttop: ev.pageY\n\t\t\t};\n\t\t\tvar setPosition = function(a, p) {\n\t\t\t\t// Set centered position\n\t\t\t\tif (this.options.position[p] == 'center') {\n\t\t\t\t\tthis.pos[a] -= Math.ceil(this.dimensions[p] / 2);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// Move to left or top\n\t\t\t\tthis.pos[a] += (a == this.options.position[p]) ? ((this.dimensions[p] * -1) - this.options.offset[p]) : this.options.offset[p];\n\t\t\t\t\n\t\t\t\treturn this.pos[a];\n\t\t\t}.bind(this);\n\t\t\t\n\t\t\t// Set position to wrapper\n\t\t\tthis.wrapper.css({\n\t\t\t\tleft: setPosition('left', 'x'),\n\t\t\t\ttop: setPosition('top', 'y')\n\t\t\t});\n\t\t\t\n\t\t\t// Adjust mouse position\n\t\t\tthis.targetDimensions = {x: 0, y: 0, left: ev.pageX, top: ev.pageY};\n\t\t\tthis._adjustPosition();\n\t\t};\n\t\t\n\t\t// Attach document and window events\n\t\tthis._attachEvents = function() {\n\t\t\t\n\t\t\t// Closing event: closeOnEsc\n\t\t\tthis.options.closeOnEsc && jQuery(document).on('keyup.jBox-' + this.id, function(ev) { if (ev.keyCode == 27) { this.close({ignoreDelay: true}); }}.bind(this));\n\t\t\t\n\t\t\t// Closing event: closeOnClick\n\t\t\tif (this.options.closeOnClick === true || this.options.closeOnClick == 'body') {\n\t\t\t\tjQuery(document).on('touchend.jBox-' + this.id + ' click.jBox-' + this.id, function(ev) {\n\t\t\t\t\tif (this.blockBodyClick || (this.options.closeOnClick == 'body' && (ev.target == this.wrapper[0] || this.wrapper.has(ev.target).length)))\n\t\t\t\t\t\treturn;\n\t\t\t\t\tthis.close({ignoreDelay: true});\n\t\t\t\t}.bind(this));\n\t\t\t}\n\t\t\t\n\t\t\t// Positioning events\n\t\t\tif (((this.options.adjustPosition && this.options.adjustTracker) || this.options.reposition) && !this.fixed && this.outside) {\n\t\t\t\t\n\t\t\t\tvar scrollTimer,\n\t\t\t\t\tscrollTimerTriggered = 0,\n\t\t\t\t\tscrollTriggerDelay = 150;\t// Trigger scroll and resize events every 150 ms (set a higher value to improve performance)\n\t\t\t\t\t\n\t\t\t\t// Function to delay positioning event\n\t\t\t\tvar positionDelay = function () {\n\t\t\t\t\tvar now = new Date().getTime();\n\t\t\t\t\tif (!scrollTimer) {\n\t\t\t\t\t\tif (now - scrollTimerTriggered > scrollTriggerDelay) {\n\t\t\t\t\t\t\tthis.options.reposition && this.position();\n\t\t\t\t\t\t\tthis.options.adjustTracker && this._adjustPosition();\n\t\t\t\t\t\t\tscrollTimerTriggered = now;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tscrollTimer = setTimeout(function() {\n\t\t\t\t\t\t\tscrollTimer = null;\n\t\t\t\t\t\t\tscrollTimerTriggered = new Date().getTime();\n\t\t\t\t\t\t\tthis.options.reposition && this.position();\n\t\t\t\t\t\t\tthis.options.adjustTracker && this._adjustPosition();\n\t\t\t\t\t\t}.bind(this), scrollTriggerDelay);\n\t\t\t\t\t}\n\t\t\t\t}.bind(this);\n\t\t\t\t\n\t\t\t\t// Trigger position events when scrolling\n\t\t\t\t(this.options.adjustTracker && this.options.adjustTracker != 'resize') && jQuery(window).on('scroll.jBox-' + this.id, function(ev) { positionDelay(); }.bind(this));\n\t\t\t\t\n\t\t\t\t// Trigger position events when resizing\n\t\t\t\t((this.options.adjustTracker && this.options.adjustTracker != 'scroll') || this.options.reposition) && jQuery(window).on('resize.jBox-' + this.id, function(ev) { positionDelay(); }.bind(this));\n\t\t\t}\n\t\t\t\n\t\t\t// Mousemove events\n\t\t\tthis.options.target == 'mouse' && jQuery('body').on('mousemove.jBox-' + this.id, function(ev) { this._positionMouse(ev); }.bind(this));\n\t\t};\n\t\t\n\t\t// Detach document and window events\n\t\tthis._detachEvents = function() {\n\t\t\t\n\t\t\t// Closing event: closeOnEsc\n\t\t\tthis.options.closeOnEsc && jQuery(document).off('keyup.jBox-' + this.id);\n\t\t\t\n\t\t\t// Closing event: closeOnClick\n\t\t\t(this.options.closeOnClick === true || this.options.closeOnClick == 'body') && jQuery(document).off('touchend.jBox-' + this.id + ' click.jBox-' + this.id);\n\t\t\t\n\t\t\t// Positioning events\n\t\t\tif ((this.options.adjustPosition && this.options.adjustTracker) || this.options.reposition) {\n\t\t\t\tjQuery(window).off('scroll.jBox-' + this.id);\n\t\t\t\tjQuery(window).off('resize.jBox-' + this.id);\n\t\t\t}\n\t\t\t\n\t\t\t// Mousemove events\n\t\t\tthis.options.target == 'mouse' && jQuery('body').off('mousemove.jBox-' + this.id);\n\t\t};\n\n\t\t// Add overlay\n\t\tthis._addOverlay = function() {\n\t\t\t\n\t\t\t// If the overlay isn't cached, set overlay or create it\n\t\t\tif (!this.overlay) {\n\t\t\t\t// Get the overlay and adjust z-Index\n\t\t\t\tthis.overlay = jQuery('#jBox-overlay').length ? jQuery('#jBox-overlay').css({zIndex: Math.min(jQuery('#jBox-overlay').css('z-index'), (this.options.zIndex - 1))}) : (jQuery('<div/>', {id: 'jBox-overlay'}).css({display: 'none', opacity: 0, zIndex: (this.options.zIndex - 1)}).appendTo(jQuery('body')));\n\t\t\t\t\n\t\t\t\t// Add close button to overlay\n\t\t\t\t(this.options.closeButton == 'overlay' || this.options.closeButton === true) && ((jQuery('#jBox-overlay .jBox-closeButton').length > 0) ? jQuery('#jBox-overlay .jBox-closeButton').on('touchend click', function() { this.isOpen && this.close({ignoreDelay: true}); }.bind(this)) : this.overlay.append(this.closeButton));\n\t\t\t\t\n\t\t\t\t// Add closeOnClick: 'overlay' events\n\t\t\t\t(this.options.closeOnClick == 'overlay') && this.overlay.on('touchend click', function() { this.isOpen && this.close({ignoreDelay: true}); }.bind(this));\n\t\t\t}\n\t\t\t\n\t\t\t// Add jBox to overlay data\n\t\t\tvar overlay_data = this.overlay.data('jBox') || {};\n\t\t\toverlay_data['jBox-' + this.id] = true;\n\t\t\tthis.overlay.data('jBox', overlay_data);\n\t\t\t\n\t\t\t// Abort if overlay is shown already\n\t\t\tif (this.overlay.css('display') == 'block') return;\n\t\t\t\n\t\t\t// Show overlay\n\t\t\tthis.options.fade ? (this.overlay.stop() && this.overlay.animate({opacity: 1}, {\n\t\t\t\tqueue: false,\n\t\t\t\tduration: this.options.fade,\n\t\t\t\tstart: function() { this.overlay.css({display: 'block'}); }.bind(this)\n\t\t\t})) : this.overlay.css({display: 'block', opacity: 1});\n\t\t};\n\t\t\n\t\t// Remove overlay\n\t\tthis._removeOverlay = function() {\n\t\t\t\n\t\t\t// Abort if no overlay found\n\t\t\tif (!this.overlay) return;\n\t\t\t\n\t\t\t// Remove jBox from data\n\t\t\tvar overlay_data = this.overlay.data('jBox');\n\t\t\tdelete overlay_data['jBox-' + this.id];\n\t\t\tthis.overlay.data('jBox', overlay_data);\n\t\t\t\n\t\t\t// Hide overlay if no other jBox needs it\n\t\t\tif (jQuery.isEmptyObject(overlay_data)) {\n\t\t\t\tthis.options.fade ? (this.overlay.stop() && this.overlay.animate({opacity: 0}, {\n\t\t\t\t\tqueue: false,\n\t\t\t\t\tduration: this.options.fade,\n\t\t\t\t\tcomplete: function() { this.overlay.css({display: 'none'}); }.bind(this)\n\t\t\t\t})) : this.overlay.css({display: 'none', opacity: 0});\n\t\t\t}\n\t\t};\n\t\t\n\t\t// Generate CSS for animations and append to header\n\t\tthis._generateCSS = function() {\n\t\t\tif (this.IE8) return;\n\t\t\t\n\t\t\t// Get open and close animations if none provided\n\t\t\t(jQuery.type(this.options.animation) != 'object') && (this.options.animation = {\n\t\t\t\tpulse: {open: 'pulse', close: 'zoomOut'},\n\t\t\t\tzoomIn: {open: 'zoomIn', close: 'zoomIn'},\n\t\t\t\tzoomOut: {open: 'zoomOut', close: 'zoomOut'},\n\t\t\t\tmove: {open: 'move', close: 'move'},\n\t\t\t\tslide: {open: 'slide', close: 'slide'},\n\t\t\t\tflip: {open: 'flip', close: 'flip'},\n\t\t\t\ttada: {open: 'tada', close: 'zoomOut'}\n\t\t\t}[this.options.animation]);\n\t\t\t\n\t\t\t// Get direction var\n\t\t\tthis.options.animation.open && (this.options.animation.open = this.options.animation.open.split(':'));\n\t\t\tthis.options.animation.close && (this.options.animation.close = this.options.animation.close.split(':'));\n\t\t\tthis.options.animation.openDirection = this.options.animation.open ? this.options.animation.open[1] : null;\n\t\t\tthis.options.animation.closeDirection = this.options.animation.close ? this.options.animation.close[1] : null;\n\t\t\tthis.options.animation.open && (this.options.animation.open = this.options.animation.open[0]);\n\t\t\tthis.options.animation.close && (this.options.animation.close = this.options.animation.close[0]);\n\t\t\t\n\t\t\t// Add 'Open' and 'Close' to animation names\n\t\t\tthis.options.animation.open && (this.options.animation.open += 'Open');\n\t\t\tthis.options.animation.close && (this.options.animation.close += 'Close');\n\t\t\t\n\t\t\t// All animations\n\t\t\tvar animations = {\n\t\t\t\tpulse: {\n\t\t\t\t\tduration: 350,\n\t\t\t\t\tcss: [['0%', 'scale(1)'], ['50%', 'scale(1.1)'], ['100%', 'scale(1)']]\n\t\t\t\t},\n\t\t\t\tzoomInOpen: {\n\t\t\t\t\tduration: (this.options.fade || 180),\n\t\t\t\t\tcss: [['0%', 'scale(0.9)'], ['100%', 'scale(1)']]\n\t\t\t\t},\n\t\t\t\tzoomInClose: {\n\t\t\t\t\tduration: (this.options.fade || 180),\n\t\t\t\t\tcss: [['0%', 'scale(1)'], ['100%', 'scale(0.9)']]\n\t\t\t\t},\n\t\t\t\tzoomOutOpen: {\n\t\t\t\t\tduration: (this.options.fade || 180),\n\t\t\t\t\tcss: [['0%', 'scale(1.1)'], ['100%', 'scale(1)']]\n\t\t\t\t},\n\t\t\t\tzoomOutClose: {\n\t\t\t\t\tduration: (this.options.fade || 180),\n\t\t\t\t\tcss: [['0%', 'scale(1)'], ['100%', 'scale(1.1)']]\n\t\t\t\t},\n\t\t\t\tmoveOpen: {\n\t\t\t\t\tduration: (this.options.fade || 180),\n\t\t\t\t\tpositions: {top: {'0%': -12}, right: {'0%': 12}, bottom: {'0%': 12}, left: {'0%': -12}},\n\t\t\t\t\tcss: [['0%', 'translate%XY(%Vpx)'], ['100%', 'translate%XY(0px)']]\n\t\t\t\t},\n\t\t\t\tmoveClose: {\n\t\t\t\t\tduration: (this.options.fade || 180),\n\t\t\t\t\ttiming: 'ease-in',\n\t\t\t\t\tpositions: {top: {'100%': -12}, right: {'100%': 12}, bottom: {'100%': 12}, left: {'100%': -12}},\n\t\t\t\t\tcss: [['0%', 'translate%XY(0px)'], ['100%', 'translate%XY(%Vpx)']]\n\t\t\t\t},\n\t\t\t\tslideOpen: {\n\t\t\t\t\tduration: 400,\n\t\t\t\t\tpositions: {top: {'0%': -400}, right: {'0%': 400}, bottom: {'0%': 400}, left: {'0%': -400}},\n\t\t\t\t\tcss: [['0%', 'translate%XY(%Vpx)'], ['100%', 'translate%XY(0px)']]\n\t\t\t\t},\n\t\t\t\tslideClose: {\n\t\t\t\t\tduration: 400,\n\t\t\t\t\ttiming: 'ease-in',\n\t\t\t\t\tpositions: {top: {'100%': -400}, right: {'100%': 400}, bottom: {'100%': 400}, left: {'100%': -400}},\n\t\t\t\t\tcss: [['0%', 'translate%XY(0px)'], ['100%', 'translate%XY(%Vpx)']]\n\t\t\t\t},\n\t\t\t\tflipOpen: {\n\t\t\t\t\tduration: 600,\n\t\t\t\t\tcss: [['0%', 'perspective(400px) rotateX(90deg)'], ['40%', 'perspective(400px) rotateX(-15deg)'], ['70%', 'perspective(400px) rotateX(15deg)'], ['100%', 'perspective(400px) rotateX(0deg)']]\n\t\t\t\t},\n\t\t\t\tflipClose: {\n\t\t\t\t\tduration: (this.options.fade || 300),\n\t\t\t\t\tcss: [['0%', 'perspective(400px) rotateX(0deg)'], ['100%', 'perspective(400px) rotateX(90deg)']]\n\t\t\t\t},\n\t\t\t\ttada: {\n\t\t\t\t\tduration: 800,\n\t\t\t\t\tcss: [['0%', 'scale(1)'], ['10%, 20%', 'scale(0.9) rotate(-3deg)'], ['30%, 50%, 70%, 90%', 'scale(1.1) rotate(3deg)'], ['40%, 60%, 80%', 'scale(1.1) rotate(-3deg)'], ['100%', 'scale(1) rotate(0)']]\n\t\t\t\t}\n\t\t\t};\n\t\t\t\n\t\t\t// Set Open and Close names for standalone animations\n\t\t\tjQuery.each(['pulse', 'tada'], function(index, item) { animations[item + 'Open'] = animations[item + 'Close'] = animations[item]; });\n\t\t\t\n\t\t\t// Function to generate the CSS for the keyframes\n\t\t\tvar generateKeyframeCSS = function(ev, position) {\n\t\t\t\t\n\t\t\t\t// Generate keyframes CSS\n\t\t\t\tkeyframe_css = '@' + this.prefix + 'keyframes jBox-animation-' + this.options.animation[ev] + '-' + ev + (position ? '-' + position : '') + ' {';\n\t\t\t\tjQuery.each(animations[this.options.animation[ev]].css, function(index, item) {\n\t\t\t\t\tvar translate = position ? item[1].replace('%XY', this._getXY(position).toUpperCase()) : item[1];\n\t\t\t\t\tanimations[this.options.animation[ev]].positions && (translate = translate.replace('%V', animations[this.options.animation[ev]].positions[position][item[0]]));\n\t\t\t\t\tkeyframe_css += item[0] + ' {' + this.prefix + 'transform:' + translate + ';}';\n\t\t\t\t}.bind(this));\n\t\t\t\tkeyframe_css += '}';\n\t\t\t\t\n\t\t\t\t// Generate class CSS\n\t\t\t\tkeyframe_css += '.jBox-animation-' + this.options.animation[ev] + '-' + ev + (position ? '-' + position : '') + ' {';\n\t\t\t\tkeyframe_css += this.prefix + 'animation-duration: ' + animations[this.options.animation[ev]].duration + 'ms;';\n\t\t\t\tkeyframe_css += this.prefix + 'animation-name: jBox-animation-' + this.options.animation[ev] + '-' + ev + (position ? '-' + position : '') + ';';\n\t\t\t\tkeyframe_css += animations[this.options.animation[ev]].timing ? (this.prefix + 'animation-timing-function: ' + animations[this.options.animation[ev]].timing + ';') : '';\n\t\t\t\tkeyframe_css += '}';\n\t\t\t\t\n\t\t\t\treturn keyframe_css;\n\t\t\t}.bind(this);\n\t\t\t\n\t\t\t// Generate css for each event and positions\n\t\t\tvar css = '';\n\t\t\tjQuery.each(['open', 'close'], function(index, ev) {\n\t\t\t\t// No CSS needed for closing with no fade\n\t\t\t\tif (!this.options.animation[ev] || !animations[this.options.animation[ev]] || (ev == 'close' && !this.options.fade)) return '';\n\t\t\t\t\n\t\t\t\t// Generate CSS\n\t\t\t\tanimations[this.options.animation[ev]].positions ?\n\t\t\t\t\tjQuery.each(['top', 'right', 'bottom', 'left'], function(index2, position) { css += generateKeyframeCSS(ev, position); }) :\n\t\t\t\t\tcss += generateKeyframeCSS(ev);\n\t\t\t}.bind(this));\n\t\t\t\n\t\t\tjQuery('<style/>').append(css).appendTo(jQuery('head'));\n\t\t};\n\t\t\n\t\t// Block body clicks for 10ms to prevent extra event triggering\n\t\tthis._blockBodyClick = function() {\n\t\t\tthis.blockBodyClick = true;\n\t\t\tsetTimeout(function() { this.blockBodyClick = false; }.bind(this), 10);\n\t\t};\n\t\t\n\t\t// Add css for animations\n\t\tthis.options.animation && this._generateCSS();\n\t\t\n\t\t// Animations\n\t\tthis._animate = function(ev) {\n\t\t\tif (this.IE8) return;\n\t\t\tev || (ev = this.isOpen ? 'open' : 'close');\n\t\t\t\n\t\t\t// Don't animate when closing with no fade duration\n\t\t\tif (!this.options.fade && ev == 'close') return null;\n\t\t\t\n\t\t\t// Get the current position, use opposite if jBox is flipped\n\t\t\tvar animationDirection = (this.options.animation[ev + 'Direction'] || ((this.align != 'center') ? this.align : this.options.attributes.x));\n\t\t\tthis.flipped && this._getXY(animationDirection) == (this._getXY(this.align)) && (animationDirection = this._getOpp(animationDirection));\n\t\t\t\n\t\t\t// Add event and position classes\n\t\t\tvar classnames = 'jBox-animation-' + this.options.animation[ev] + '-' + ev + ' jBox-animation-' + this.options.animation[ev] + '-' + ev + '-' + animationDirection;\n\t\t\tthis.wrapper.addClass(classnames);\n\t\t\t\n\t\t\t// Get duration of animation\n\t\t\tvar animationDuration = parseFloat(this.wrapper.css(this.prefix + 'animation-duration')) * 1000;\n\t\t\tev == 'close' && (animationDuration = Math.min(animationDuration, this.options.fade));\n\t\t\t\n\t\t\t// Remove animation classes when animation is finished\n\t\t\tsetTimeout(function() { this.wrapper.removeClass(classnames); }.bind(this), animationDuration);\n\t\t};\n\t\t\n\t\t// Abort animation\n\t\tthis._abortAnimation = function() {\n\t\t\tif (this.IE8) return;\n\t\t\t\n\t\t\t// Remove all animation classes\n\t\t\tvar prefix = 'jBox-animation';\n\t\t\tvar classes = this.wrapper.attr('class').split(' ').filter(function(c) {\n\t\t\t\treturn c.lastIndexOf(prefix, 0) !== 0;\n\t\t\t});\n\t\t\tthis.wrapper.attr('class', classes.join(' '));\n\t\t};\n\t\t\n\t\t// Adjust position\n\t\tthis._adjustPosition = function() {\n\t\t\tif (!this.options.adjustPosition) return null;\n\t\t\t\n\t\t\t// Reset cached pointer position\n\t\t\tif (this.positionAdjusted) {\n\t\t\t\tthis.wrapper.css(this.pos);\n\t\t\t\tthis.pointer && this.wrapper.css('padding', 0).css('padding-' + this._getOpp(this.outside), this.pointer.dimensions[this._getXY(this.outside)]).removeClass('jBox-pointerPosition-' + this._getOpp(this.pointer.position)).addClass('jBox-pointerPosition-' + this.pointer.position);\n\t\t\t\tthis.pointer && this.pointer.element.attr('class', 'jBox-pointer jBox-pointer-' + this._getOpp(this.outside)).css(this.pointer.margin);\n\t\t\t\tthis.positionAdjusted = false;\n\t\t\t\tthis.flipped = false;\n\t\t\t}\n\t\t\t\n\t\t\t// Get the window dimensions\n\t\t\tvar win = jQuery(window);\n\t\t\tvar windowDimensions = {\n\t\t\t\tx: win.width(),\n\t\t\t\ty: win.height(),\n\t\t\t\ttop: (this.options.fixed && this.target.data('jBox-fixed') ? 0 : win.scrollTop()),\n\t\t\t\tleft: (this.options.fixed && this.target.data('jBox-fixed') ? 0 : win.scrollLeft())\n\t\t\t};\n\t\t\twindowDimensions.bottom = windowDimensions.top + windowDimensions.y;\n\t\t\twindowDimensions.right = windowDimensions.left + windowDimensions.x;\n\t\t\t\n\t\t\t// Find out where the jBox is out of view area\n\t\t\tvar outYT = (windowDimensions.top > this.pos.top - (this.options.adjustDistance.top || 0)),\n\t\t\t\toutXR = (windowDimensions.right < this.pos.left + this.dimensions.x + (this.options.adjustDistance.right || 0)),\n\t\t\t\toutYB = (windowDimensions.bottom < this.pos.top + this.dimensions.y + (this.options.adjustDistance.bottom || 0)),\n\t\t\t\toutXL = (windowDimensions.left > this.pos.left - (this.options.adjustDistance.left || 0)),\n\t\t\t\toutX = outXL ? 'left' : (outXR ? 'right' : null),\n\t\t\t\toutY = outYT ? 'top' : (outYB ? 'bottom' : null),\n\t\t\t\tout = outX || outY;\n\t\t\t\t\n\t\t\t// Stop here if jBox is not out of view area\n\t\t\tif (!out) return;\n\t\t\t\n\t\t\t// Flip jBox\n\t\t\tif (this.options.adjustPosition != 'move' && (outX == this.outside || outY == this.outside)) {\n\t\t\t\t\n\t\t\t\tthis.target == 'mouse' && (this.outside = 'right');\n\t\t\t\t\n\t\t\t\t// Check if enough space is availible on opposite position\n\t\t\t\tif (((this.outside == 'top' || this.outside == 'left') ?\n\t\t\t\t\t(windowDimensions[this._getXY(this.outside)] - (this.targetDimensions[this._getTL(this.outside)] - windowDimensions[this._getTL(this.outside)]) - this.targetDimensions[this._getXY(this.outside)]) + this.options.offset[this._getXY(this.outside)] :\n\t\t\t\t\t(this.targetDimensions[this._getTL(this.outside)] - windowDimensions[this._getTL(this.outside)]) - this.options.offset[this._getXY(this.outside)]\n\t\t\t\t\t) > this.dimensions[this._getXY(this.outside)] + parseInt(this.options.adjustDistance[this._getOpp(this.outside)])) {\n\n\t\t\t\t\t// Adjust wrapper and pointer\n\t\t\t\t\tthis.wrapper.css(this._getTL(this.outside), this.pos[this._getTL(this.outside)] + ((this.dimensions[this._getXY(this.outside)] + (this.options.offset[this._getXY(this.outside)] * (this.outside == 'top' || this.outside == 'left' ? -2 : 2)) + this.targetDimensions[this._getXY(this.outside)]) * (this.outside == 'top' || this.outside == 'left' ? 1 : -1)));\n\t\t\t\t\tthis.pointer && this.wrapper.removeClass('jBox-pointerPosition-' + this.pointer.position).addClass('jBox-pointerPosition-' + this._getOpp(this.pointer.position)).css('padding', 0).css('padding-' + this.outside, this.pointer.dimensions[this._getXY(this.outside)]);\n\t\t\t\t\tthis.pointer && this.pointer.element.attr('class', 'jBox-pointer jBox-pointer-' + this.outside);\n\t\t\t\t\tthis.positionAdjusted = true;\n\t\t\t\t\tthis.flipped = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// Move jBox (only possible with pointer)\n\t\t\tvar outMove = (this._getXY(this.outside) == 'x') ? outY : outX;\n\t\t\t\n\t\t\tif (this.pointer && this.options.adjustPosition != 'flip' && this._getXY(outMove) == this._getOpp(this._getXY(this.outside))) {\n\t\t\t\t\n\t\t\t\t// Get the maximum space we have availible to adjust\n\t\t\t\tif (this.pointer.align == 'center') {\n\t\t\t\t\tvar spaceAvail = (this.dimensions[this._getXY(outMove)] / 2) - (this.pointer.dimensions[this._getOpp(this.pointer.xy)] / 2) - (parseInt(this.pointer.element.css('margin-' + this.pointer.alignAttribute)) * (outMove != this._getTL(outMove) ? -1 : 1));\n\t\t\t\t} else {\n\t\t\t\t\tvar spaceAvail = (outMove == this.pointer.alignAttribute) ?\n\t\t\t\t\t\tparseInt(this.pointer.element.css('margin-' + this.pointer.alignAttribute)) :\n\t\t\t\t\t\tthis.dimensions[this._getXY(outMove)] - parseInt(this.pointer.element.css('margin-' + this.pointer.alignAttribute)) - this.pointer.dimensions[this._getXY(outMove)];\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Get the overlapping space\n\t\t\t\tspaceDiff = (outMove == this._getTL(outMove)) ?\n\t\t\t\t\twindowDimensions[this._getTL(outMove)] - this.pos[this._getTL(outMove)] + this.options.adjustDistance[outMove] :\n\t\t\t\t\t(windowDimensions[this._getOpp(this._getTL(outMove))] - this.pos[this._getTL(outMove)] - this.options.adjustDistance[outMove] - this.dimensions[this._getXY(outMove)]) * -1;\n\t\t\t\t\t\n\t\t\t\t// Add overlapping space on left or top window edge\n\t\t\t\tif (outMove == this._getOpp(this._getTL(outMove)) && this.pos[this._getTL(outMove)] - spaceDiff < windowDimensions[this._getTL(outMove)] + this.options.adjustDistance[this._getTL(outMove)]) {\n\t\t\t\t\tspaceDiff -= windowDimensions[this._getTL(outMove)] + this.options.adjustDistance[this._getTL(outMove)] - (this.pos[this._getTL(outMove)] - spaceDiff);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Only adjust the maximum availible\n\t\t\t\tspaceDiff = Math.min(spaceDiff, spaceAvail);\n\t\t\t\t\n\t\t\t\t// Move jBox\n\t\t\t\tif (spaceDiff <= spaceAvail && spaceDiff > 0) {\n\t\t\t\t\tthis.pointer.element.css('margin-' + this.pointer.alignAttribute, parseInt(this.pointer.element.css('margin-' + this.pointer.alignAttribute)) - (spaceDiff * (outMove != this.pointer.alignAttribute ? -1 : 1)));\n\t\t\t\t\tthis.wrapper.css(this._getTL(outMove), this.pos[this._getTL(outMove)] + (spaceDiff * (outMove != this._getTL(outMove) ? -1 : 1)));\n\t\t\t\t\tthis.positionAdjusted = true;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t\n\t\t// Fire onInit event\n\t\tthis._fireEvent('onInit');\n\t\t\n\t\treturn this;\n\t};\n\n\t// Attach jBox to elements\n\tjBox.prototype.attach = function(elements, trigger) {\n\t\telements || (elements = jQuery(this.options.attach.selector || this.options.attach));\n\t\ttrigger || (trigger = this.options.trigger);\n\t\t\n\t\telements && elements.length && jQuery.each(elements, function(index, el) {\n\t\t\tel = jQuery(el);\n\t\t\tif (!el.data('jBox-attached-' + this.id)) {\n\t\t\t\t\n\t\t\t\t// Remove title attribute and store content on element\n\t\t\t\t(this.options.getContent == 'title' && el.attr('title') != undefined) && el.data('jBox-getContent', el.attr('title')).removeAttr('title');\n\t\t\t\t\n\t\t\t\t// Add Element to collection\n\t\t\t\tthis.attachedElements || (this.attachedElements = []);\n\t\t\t\tthis.attachedElements.push(el[0]);\n\t\t\t\t\n\t\t\t\t// Add click or mouseenter event, click events can prevent default as well\n\t\t\t\tel.on(trigger + '.jBox-attach-' + this.id, function(ev) {\n\t\t\t\t\t// Clear timer\n\t\t\t\t\tthis.timer && clearTimeout(this.timer);\n\t\t\t\t\t\n\t\t\t\t\t// Block opening when jbox is open and the source element is triggering\n\t\t\t\t\tif (trigger == 'mouseenter' && this.isOpen && this.source[0] == el[0])\n\t\t\t\t\t\treturn;\n\t\t\t\t\t\n\t\t\t\t\t// Only close jBox if you click the current target element, otherwise open at new target\n\t\t\t\t\tif (this.isOpen && this.source && this.source[0] != el[0]) var forceOpen = true;\n\t\t\t\t\t\n\t\t\t\t\t// Set new source element\n\t\t\t\t\tthis.source = el;\n\t\t\t\t\t\n\t\t\t\t\t// Set new target\n\t\t\t\t\t!this.options.target && (this.target = el);\n\t\t\t\t\t\n\t\t\t\t\t// Prevent default action on click\n\t\t\t\t\ttrigger == 'click' && this.options.preventDefault && ev.preventDefault();\n\t\t\t\t\t\n\t\t\t\t\t// Toggle or open jBox\n\t\t\t\t\tthis[trigger == 'click' && !forceOpen ? 'toggle' : 'open']();\n\t\t\t\t}.bind(this));\n\t\t\t\t\n\t\t\t\t// Add close event for trigger event mouseenter\n\t\t\t\t(this.options.trigger == 'mouseenter') && el.on('mouseleave', function(ev) {\n\t\t\t\t\t// If we have set closeOnMouseleave, do not close jBox when leaving attached element and mouse is over jBox\n\t\t\t\t\tif(!this.options.closeOnMouseleave || !(ev.relatedTarget == this.wrapper[0] || jQuery(ev.relatedTarget).parents('#' + this.id).length)) this.close();\n\t\t\t\t}.bind(this));\n\t\t\t\t\n\t\t\t\tel.data('jBox-attached-' + this.id, trigger);\n\t\t\t\t\n\t\t\t\t// Fire onAttach event\n\t\t\t\tthis._fireEvent('onAttach', el);\n\t\t\t}\n\t\t}.bind(this));\n\t\t\n\t\treturn this;\n\t};\n\n\t// Detach jBox from elements\n\tjBox.prototype.detach = function(elements) {\n\t\telements || (elements = this.attachedElements || []);\n\t\t\n\t\telements && elements.length && jQuery.each(elements, function(index, el) {\n\t\t\tel = jQuery(el);\n\t\t\t// Remove events\n\t\t\tif (el.data('jBox-attached-' + this.id)) {\n\t\t\t\tel.off(el.data('jBox-attached-' + this.id) + '.jBox-attach-' + this.id);\n\t\t\t\tel.data('jBox-attached-' + this.id, null);\n\t\t\t}\n\t\t\t// Remove element from collection\n\t\t\tthis.attachedElements = jQuery.grep(this.attachedElements, function(value) {\n\t\t\t\treturn value != el[0];\n\t\t\t});\n\t\t}.bind(this));\n\t\t\n\t\treturn this;\n\t};\n\n\t// Set title\n\tjBox.prototype.setTitle = function(title, ignore_positioning) {\n\t\t!this.wrapper && this._create();\n\t\t\n\t\tvar wrapperHeight = this.wrapper.height(), wrapperWidth = this.wrapper.width();\n\t\tif (title == null || title == undefined) return this;\n\t\t\n\t\tif (!this.title) {\n\t\t\tthis.titleContainer = jQuery('<div/>', {'class': 'jBox-title'});\n\t\t\tthis.title = jQuery('<div/>').appendTo(this.titleContainer);\n\t\t\tthis.wrapper.addClass('jBox-hasTitle');\n\t\t\tif (this.options.closeButton == 'title' || (this.options.closeButton === true && !this.options.overlay)) {\n\t\t\t\tthis.wrapper.addClass('jBox-closeButton-title');\n\t\t\t\tthis.closeButton.appendTo(this.titleContainer);\n\t\t\t}\n\t\t\tthis.titleContainer.insertBefore(this.content);\n\t\t}\n\t\tthis.title.html(title);\n\t\t\n\t\t// Reposition if dimensions changed\n\t\t!ignore_positioning && this.options.repositionOnContent && (wrapperHeight != this.wrapper.height() || wrapperWidth != this.wrapper.width()) && this.position();\n\t\t\n\t\treturn this;\n\t};\n\n\t// Set content\n\tjBox.prototype.setContent = function(content, ignore_positioning) {\n\t\tif (content == null) return this;\n\t\t\n\t\t// Create jBox if no wrapper found\n\t\t!this.wrapper && this._create();\n\t\t\n\t\t// Get the width and height of wrapper, only if they change we need to reposition\n\t\tvar wrapperHeight = this.wrapper.height(), wrapperWidth = this.wrapper.width();\n\t\t\n\t\t// Get the width and height of body, if they change with new content, adjust accordingly (happens when a hidden scrollbar changes body dimensions)\n\t\tvar bodyHeight = jQuery('body').height(), bodyWidth = jQuery('body').width();\n\t\t\n\t\t// Extract all appended containers to body\n\t\tthis.content.children('[data-jbox-content-appended]').appendTo('body').css({display: 'none'});\n\t\t\n\t\t// Set the new content\n\t\tswitch (jQuery.type(content)) {\n\t\t\tcase 'string': this.content.html(content); break;\n\t\t\tcase 'object': this.content.html(''); content.attr('data-jbox-content-appended', 1).appendTo(this.content).css({display: 'block'}); break;\n\t \t}\n\t \t\n\t\t// Calculate the difference to before the content was set\n\t\tvar adjustOffset = {\n\t\t\tx: bodyWidth - jQuery('body').width(),\n\t\t\ty: bodyHeight - jQuery('body').height()\n\t\t};\n\t\t\n\t\t// Reposition if dimensions changed\n\t\t!ignore_positioning && this.options.repositionOnContent && (wrapperHeight != this.wrapper.height() || wrapperWidth != this.wrapper.width()) && this.position({adjustOffset: adjustOffset});\n\t\t\n\t\treturn this;\n\t};\n\n\t// Set new dimensions\n\tjBox.prototype.setDimensions = function(type, val, pos) {\n\t\t\n\t\t// Create jBox if no wrapper found\n\t\t!this.wrapper && this._create();\n\t\t\n\t\t// Default value is 'auto'\n\t\tval == undefined && (val == 'auto');\n\t\t\n\t\t// Set CSS of content\n\t\tthis.content.css(type, val);\n\t\t\n\t\t// Reposition by default\n\t\t(pos == undefined || pos) && this.position();\n\t};\n\n\t// Set width or height\n\tjBox.prototype.setWidth = function(val, pos) { this.setDimensions('width', val, pos); };\n\tjBox.prototype.setHeight = function(val, pos) { this.setDimensions('height', val, pos); };\n\n\t// Position jBox\n\tjBox.prototype.position = function(options, keep_position) {\n\t\toptions || (options = {});\n\t\t\n\t\t// Get target\n\t\tthis.target = options.target || this.target || this.options.target || jQuery(window);\n\t\t\n\t\t// Move outside of scroll area to make sure dimensions are calculated correctly\n\t\t!keep_position && this.wrapper.css({top: -12000, left: -12000});\n\t\t\n\t\t// Cache total current dimensions of jBox\n\t\tthis.dimensions = {\n\t\t\tx: this.wrapper.outerWidth(),\n\t\t\ty: this.wrapper.outerHeight()\n\t\t};\n\t\t\n\t\t// Mousemove can't be positioned\n\t\tif (this.target == 'mouse') return;\n\t\t\n\t\t// Set percent and margin for centered inside\n\t\tif (this.options.position.x == 'center' && this.options.position.y == 'center') {\n\t\t\tthis.wrapper.css({left: '50%', top: '50%', marginLeft: (this.dimensions.x * -0.5 + this.options.offset.x), marginTop: (this.dimensions.y * -0.5 + this.options.offset.y)});\n\t\t\treturn this;\n\t\t}\n\t\t\n\t\t// Total current dimensions of target element\n\t\tvar targetOffset = this.target.offset();\n\t\t\n\t\t// Add fixed data to target\n\t\t!this.target.data('jBox-fixed') && this.target.data('jBox-fixed', (this.target[0] != jQuery(window)[0] && (this.target.css('position') == 'fixed' || this.target.parents().filter(function() { return jQuery(this).css('position') == 'fixed'; }).length > 0)) ? 'fixed' : 'static');\n\t\t\n\t\t// When the target is fixed and jBox is fixed, remove scroll offset\n\t\tif (this.target.data('jBox-fixed') == 'fixed' && this.options.fixed) {\n\t\t\ttargetOffset.top = targetOffset.top - jQuery(window).scrollTop();\n\t\t\ttargetOffset.left = targetOffset.left - jQuery(window).scrollLeft();\n\t\t}\n\t\t\n\t\t// Store target dimensions\n\t\tthis.targetDimensions = {\n\t\t\tx: this.target.outerWidth(),\n\t\t\ty: this.target.outerHeight(),\n\t\t\ttop: (targetOffset ? targetOffset.top : 0),\n\t\t\tleft: (targetOffset ? targetOffset.left : 0)\n\t\t};\n\t\tthis.pos = {};\n\t\t\n\t\t// Calculate positions\n\t\tvar setPosition = function(p) {\n\t\t\t\n\t\t\t// Set number positions\n\t\t\tif (jQuery.inArray(this.options.position[p], ['top', 'right', 'bottom', 'left', 'center']) == -1) {\n\t\t\t\tthis.pos[this.options.attributes[p]] = this.options.position[p];\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// We have a target, so use 'left' or 'top' as attributes\n\t\t\tvar a = this.options.attributes[p] = (p == 'x' ? 'left' : 'top');\n\t\t\t\n\t\t\t// Start at target position\n\t\t\tthis.pos[a] = this.targetDimensions[a];\n\t\t\t\n\t\t\t// Set centered position\n\t\t\tif (this.options.position[p] == 'center') {\n\t\t\t\tthis.pos[a] += Math.ceil((this.targetDimensions[p] - this.dimensions[p]) / 2);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// Move inside\n\t\t\t(a != this.options.position[p]) && (this.pos[a] += this.targetDimensions[p] - this.dimensions[p]);\n\t\t\t\n\t\t\t// Move outside\n\t\t\t(this.options.outside == p || this.options.outside == 'xy') && (this.pos[a] += this.dimensions[p] * (a != this.options.position[p] ? 1 : -1));\n\t\t\t\n\t\t}.bind(this);\n\t\t\n\t\t// Set position including offset\n\t\tsetPosition('x');\n\t\tsetPosition('y');\n\t\t\n\t\t// Adjust position depending on pointer align\n\t\tif (this.options.pointer && jQuery.type(this.options.position.x) != 'number' && jQuery.type(this.options.position.y) != 'number') {\n\t\t\t\n\t\t\tvar adjustWrapper = 0;\n\t\t\t\n\t\t\t// Where is the pointer aligned? Add or substract accordingly\n\t\t\tswitch (this.pointer.align) {\n\t\t\t\tcase 'center':\n\t\t\t\tif (this.options.position[this._getOpp(this.options.outside)] != 'center') {\n\t\t\t\t\tadjustWrapper += (this.dimensions[this._getOpp(this.options.outside)] / 2);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\tswitch (this.options.position[this._getOpp(this.options.outside)]) {\n\t\t\t\t\tcase 'center':\n\t\t\t\t\t\tadjustWrapper += ((this.dimensions[this._getOpp(this.options.outside)] / 2) - (this.pointer.dimensions[this._getOpp(this.options.outside)] / 2)) * (this.pointer.align == this._getTL(this.pointer.align) ? 1 : -1);\n\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tadjustWrapper += (this.pointer.align != this.options.position[this._getOpp(this.options.outside)]) ?\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t// If pointer align is different to position align\n\t\t\t\t\t\t(this.dimensions[this._getOpp(this.options.outside)] * (jQuery.inArray(this.pointer.align, ['top', 'left']) !== -1 ? 1 : -1)) + ((this.pointer.dimensions[this._getOpp(this.options.outside)] / 2) * (jQuery.inArray(this.pointer.align, ['top', 'left']) !== -1 ? -1 : 1)) :\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t// If pointer align is same as position align\n\t\t\t\t\t\t(this.pointer.dimensions[this._getOpp(this.options.outside)] / 2) * (jQuery.inArray(this.pointer.align, ['top', 'left']) !== -1 ? 1 : -1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tadjustWrapper *= (this.options.position[this._getOpp(this.options.outside)] == this.pointer.alignAttribute ? -1 : 1);\n\t\t\tadjustWrapper += this.pointer.offset * (this.pointer.align == this._getOpp(this._getTL(this.pointer.align)) ? 1 : -1);\n\t\t\t\n\t\t\tthis.pos[this._getTL(this._getOpp(this.pointer.xy))] += adjustWrapper;\n\t\t}\n\t\t\n\t\t// Add adjustments\n\t\toptions.adjustOffset && options.adjustOffset.x && (this.pos[this.options.attributes.x] += parseInt(options.adjustOffset.x) * (this.options.attributes.x == 'left' ? 1 : -1));\n\t\toptions.adjustOffset && options.adjustOffset.y && (this.pos[this.options.attributes.y] += parseInt(options.adjustOffset.y) * (this.options.attributes.y == 'top' ? 1 : -1));\n\t\t\n\t\t// Add final offset\n\t\tthis.pos[this.options.attributes.x] += this.options.offset.x;\n\t\tthis.pos[this.options.attributes.y] += this.options.offset.y;\n\t\t\n\t\t// Set CSS\n\t\tthis.wrapper.css(this.pos);\n\t\t\n\t\t/*\n\t\t\tTODO Better solution\n\t\t\t\t Check this for responsive design\n\t\t\t\t \n\t\t// If by positioning dimensions changed, position again without recalculating\n\t\tif (!keep_position && this.wrapper.outerWidth() != this.dimensions.x || this.wrapper.outerHeight() != this.dimensions.y) {\n\t\t\treturn this.position(options, true);\n\t\t}\n\t\t\n\t\t*/\n\t\t\n\t\t// Adjust position\n\t\tthis._adjustPosition();\n\t\t\n\t\treturn this;\n\t};\n\n\t// Open jBox\n\tjBox.prototype.open = function(options) {\n\t\toptions || (options = {});\n\t\t\n\t\t// Abort if jBox was destroyed\n\t\tif (this.isDestroyed) return false;\n\t\t\n\t\t// Construct jBox if not already constructed\n\t\t!this.wrapper && this._create();\n\t\t\n\t\t// Abort any opening or closing timer\n\t\tthis.timer && clearTimeout(this.timer);\n\t\t\n\t\t// Block body click for 10ms, so jBox can open on attached elements while closeOnClick = 'body'\n\t\tthis._blockBodyClick();\n\t\t\n\t\t// Block opening\n\t\tif (this.isDisabled) return this;\n\t\t\n\t\t// Opening function\n\t\tvar open = function() {\n\t\t\t\n\t\t\t// Set title from source element\n\t\t\tthis.source && this.options.getTitle && (this.source.attr(this.options.getTitle) && this.setTitle(this.source.attr(this.options.getTitle)), true);\n\t\t\t\n\t\t\t// Set content from source element\n\t\t\tthis.source && this.options.getContent && (this.source.data('jBox-getContent') ? this.setContent(this.source.data('jBox-getContent'), true) : (this.source.attr(this.options.getContent) ? this.setContent(this.source.attr(this.options.getContent), true) : null));\n\t\t\t\n\t\t\t// Fire onOpen event\n\t\t\tthis._fireEvent('onOpen');\n\t\t\t\n\t\t\t// Get content from ajax\n\t\t\t((this.options.ajax && this.options.ajax.url && (!this.ajaxLoaded || this.options.ajax.reload)) || (options.ajax && options.ajax.url)) && this.ajax(options.ajax || null);\n\t\t\t\n\t\t\t// Set position\n\t\t\t(!this.positionedOnOpen || this.options.repositionOnOpen) && this.position({target: options.target}) && (this.positionedOnOpen = true);\n\t\t\t\n\t\t\t// Abort closing\n\t\t\tthis.isClosing && this._abortAnimation();\n\t\t\t\n\t\t\t// Open functions to call when jBox is closed\n\t\t\tif (!this.isOpen) {\n\t\t\t\t\n\t\t\t\t// jBox is open now\n\t\t\t\tthis.isOpen = true;\n\t\t\t\t\n\t\t\t\t// Attach events\n\t\t\t\tthis._attachEvents();\n\t\t\t\t\n\t\t\t\t// Block scrolling\n\t\t\t\tthis.options.blockScroll && jQuery('body').addClass('jBox-blockScroll-' + this.id);\n\t\t\t\t\n\t\t\t\t// Add overlay\n\t\t\t\tthis.options.overlay && this._addOverlay();\n\t\t\t\t\n\t\t\t\t// Only animate if jBox is compleately closed\n\t\t\t\tthis.options.animation && !this.isClosing && this._animate('open');\n\t\t\t\t\n\t\t\t\t// Fading animation or show immediately\n\t\t\t\tif (this.options.fade) {\n\t\t\t\t\tthis.wrapper.stop().animate({opacity: 1}, {\n\t\t\t\t\t\tqueue: false,\n\t\t\t\t\t\tduration: this.options.fade,\n\t\t\t\t\t\tstart: function() {\n\t\t\t\t\t\t\tthis.isOpening = true;\n\t\t\t\t\t\t\tthis.wrapper.css({display: 'block'});\n\t\t\t\t\t\t}.bind(this),\n\t\t\t\t\t\talways: function() {\n\t\t\t\t\t\t\tthis.isOpening = false;\n\t\t\t\t\t\t}.bind(this)\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.wrapper.css({display: 'block', opacity: 1});\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(this);\n\t\t\n\t\t// Open jBox\n\t\tthis.options.delayOpen && !this.isOpen && !this.isClosing && !options.ignoreDelay ? (this.timer = setTimeout(open, this.options.delayOpen)) : open();\n\t\t\n\t\treturn this;\n\t};\n\n\t// Close jBox\n\tjBox.prototype.close = function(options) {\n\t\toptions || (options = {});\n\t\t\n\t\t// Abort if jBox was destroyed\n\t\tif (this.isDestroyed) return false;\n\t\t\n\t\t// Abort opening\n\t\tthis.timer && clearTimeout(this.timer);\n\t\t\n\t\t// Block body click for 10ms, so jBox can open on attached elements while closeOnClock = 'body' is true\n\t\tthis._blockBodyClick();\n\t\t\n\t\t// Block closing\n\t\tif (this.isDisabled) return this;\n\t\t\n\t\t// Close function\n\t\tvar close = function() {\n\t\t\t\n\t\t\t// Fire onClose event\n\t\t\tthis._fireEvent('onClose');\n\t\t\t\n\t\t\t// Only close if jBox is open\n\t\t\tif (this.isOpen) {\n\t\t\t\t\n\t\t\t\t// jBox is not open anymore\n\t\t\t\tthis.isOpen = false;\n\t\t\t\t\n\t\t\t\t// Detach events\n\t\t\t\tthis._detachEvents();\n\t\t\t\t\n\t\t\t\t// Unblock scrolling\n\t\t\t\tthis.options.blockScroll && jQuery('body').removeClass('jBox-blockScroll-' + this.id);\n\t\t\t\t\n\t\t\t\t// Remove overlay\n\t\t\t\tthis.options.overlay && this._removeOverlay();\n\t\t\t\t\n\t\t\t\t// Only animate if jBox is compleately closed\n\t\t\t\tthis.options.animation && !this.isOpening && this._animate('close');\n\t\t\t\t\n\t\t\t\t// Fading animation or show immediately\n\t\t\t\tif (this.options.fade) {\n\t\t\t\t\tthis.wrapper.stop().animate({opacity: 0}, {\n\t\t\t\t\t\tqueue: false,\n\t\t\t\t\t\tduration: this.options.fade,\n\t\t\t\t\t\tstart: function() {\n\t\t\t\t\t\t\tthis.isClosing = true;\n\t\t\t\t\t\t}.bind(this),\n\t\t\t\t\t\tcomplete: function() {\n\t\t\t\t\t\t\tthis.wrapper.css({display: 'none'});\n\t\t\t\t\t\t\tthis.options.onCloseComplete && (this.options.onCloseComplete.bind(this))();\n\t\t\t\t\t\t\tthis.options._onCloseComplete && (this.options._onCloseComplete.bind(this))();\n\t\t\t\t\t\t}.bind(this),\n\t\t\t\t\t\talways: function() {\n\t\t\t\t\t\t\tthis.isClosing = false;\n\t\t\t\t\t\t}.bind(this)\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.wrapper.css({display: 'none', opacity: 0});\n\t\t\t\t\tthis.options._onCloseComplete && (this.options._onCloseComplete.bind(this))();\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(this);\n\t\t\n\t\t// Close jBox\n\t\toptions.ignoreDelay ? close() : (this.timer = setTimeout(close, Math.max(this.options.delayClose, 10)));\n\t\t\n\t\treturn this;\n\t};\n\n\t// Open or close jBox\n\tjBox.prototype.toggle = function(options) {\n\t\tthis[this.isOpen ? 'close' : 'open'](options);\n\t\treturn this;\n\t};\n\n\t// Block opening and closing\n\tjBox.prototype.disable = function() {\n\t\tthis.isDisabled = true;\n\t\treturn this;\n\t};\n\n\t// Unblock opening and closing\n\tjBox.prototype.enable = function() {\n\t\tthis.isDisabled = false;\n\t\treturn this;\n\t};\n\n\t// Get content from ajax\n\tjBox.prototype.ajax = function(options) {\n\t\toptions || (options = {});\n\t\t\n\t\t// Add data from source element if none set in options\n\t\t(this.options.ajax.getData && !options.data && this.source && this.source.attr(this.options.ajax.getData) != undefined) && (options.data = this.source.attr(this.options.ajax.getData) || '');\n\t\t\n\t\t// Clone the system options\n\t\tvar sysOptions = jQuery.extend(true, {}, this.options.ajax);\n\t\t\n\t\t// Abort running ajax call\n\t\tthis.ajaxRequest && this.ajaxRequest.abort();\n\t\t\n\t\t// Extract events\n\t\tvar beforeSend = options.beforeSend || sysOptions.beforeSend || function () {};\n\t\tvar complete = options.complete || sysOptions.complete || function () {};\n\t\t\n\t\t// Merge options\n\t\tvar userOptions = jQuery.extend(true, sysOptions, options);\n\t\t\n\t\t// Set new beforeSend event\n\t\tuserOptions.beforeSend = function () {\n\t\t\t\n\t\t\t// Add loading spinner\n\t\t\tif (userOptions.spinner) {\n\t\t\t\tthis.wrapper.addClass('jBox-loading');\n\t\t\t\tthis.spinner = jQuery(userOptions.spinner !== true ? userOptions.spinner : '<div class=\"jBox-spinner\"></div>').appendTo(this.container);\n\t\t\t}\n\t\t\t\n\t\t\t(beforeSend.bind(this))();\n\t\t}.bind(this);\n\t\t\n\t\t// Set new complete event\n\t\tuserOptions.complete = function (response) {\n\t\t\t\n\t\t\t// Remove spinner\n\t\t\tthis.wrapper.removeClass('jBox-loading');\n\t\t\tthis.spinner && this.spinner.remove();\n\t\t\t\n\t\t\t// Set new content\n\t\t\tuserOptions.setContent && this.setContent(response.responseText);\n\t\t\t\n\t\t\tthis.ajaxLoaded = true;\n\t\t\t\n\t\t\t(complete.bind(this))(response);\n\t\t}.bind(this);\n\t\t\n\t\t// Send new ajax request\n\t\tthis.ajaxRequest = jQuery.ajax(userOptions);\n\t\t\n\t\treturn this;\n\t};\n\n\t// Play an audio file\n\tjBox.prototype.audio = function(options) {\n\t\toptions || (options = {});\n\t\tjBox._audio || (jBox._audio = {});\n\t\t\n\t\t// URL required, no IE8 support\n\t\tif (!options.url || this.IE8) return this;\n\t\t\n\t\t// Create audio if it doesn't exist\n\t\tif (!jBox._audio[options.url]) {\n\t\t\tvar audio = jQuery('<audio/>');\n\t\t\tjQuery('<source/>', {src: options.url + '.mp3'}).appendTo(audio);\n\t\t\tjQuery('<source/>', {src: options.url + '.ogg'}).appendTo(audio);\n\t\t\tjBox._audio[options.url] = audio[0];\n\t\t}\n\t\t\n\t\t// Set volume and play audio\n\t\tjBox._audio[options.url].volume = Math.min((options.volume != undefined ? options.volume : (this.options.volume != undefined ? this.options.volume : 100) / 100), 1);\n\t\tjBox._audio[options.url].pause();\n\t\ttry { jBox._audio[options.url].currentTime = 0; } catch (e) {}\n\t\tjBox._audio[options.url].play();\n\t\t\n\t\treturn this;\n\t};\n\n\t// Destroy jBox and remove it from DOM\n\t// TODO: If no other jBox needs an overlay remove it as well\n\tjBox.prototype.destroy = function() {\n\t\tthis.detach().close({ignoreDelay: true});\n\t\tthis.wrapper && this.wrapper.remove();\n\t\tthis.isDestroyed = true;\n\t\treturn this;\n\t};\n\n\t// TODO: Find an option to preload audio files\n\n\t// Get a unique ID for jBoxes\n\tjBox._getUniqueID = (function () {\n\t\tvar i = 1;\n\t\treturn function () {\n\t\t\treturn i++;\n\t\t};\n\t}());\n\n\t// Make jBox usable with jQuery selectors\n\tjQuery.fn.jBox = function(type, options) {\n\t\ttype || (type = {});\n\t\toptions || (options = {});\n\t\treturn new jBox(type, jQuery.extend(options, {attach: this}));\n\t};\n\n\t// Add the .bind() function for IE 8 support\n\tif (!Function.prototype.bind) {\n\t\tFunction.prototype.bind = function (oThis) {\n\t\t\tvar aArgs = Array.prototype.slice.call(arguments, 1),\n\t\t\t\tfToBind = this,\n\t\t\t\tfNOP = function () {},\n\t\t\t\tfBound = function () { return fToBind.apply(this instanceof fNOP && oThis ? this : oThis, aArgs.concat(Array.prototype.slice.call(arguments))); };\n\t\t\tfNOP.prototype = this.prototype;\n\t\t\tfBound.prototype = new fNOP();\n\t\t\treturn fBound;\n\t\t};\n\t}\n\n\treturn jBox;\n}));\n"]}